version: "3.9"

services:
  household-inventory:
    build: .                              # Builds from local Dockerfile in repo
    container_name: household-inventory
    restart: unless-stopped
    ports:
      - "${HOST_PORT:-0}:5000"        # ‚Üê uses HOST_PORT env var if set, otherwise random
    volumes:
      - inventory_data:/app/inventory.db   # Persistent SQLite database
    environment:
      - TZ=America/Los_Angeles              # Set your timezone (e.g., Europe/London, Asia/Tokyo)
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5000"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
    labels:
      - "traefik.enable=false"             # Disable if using Traefik; optional for other proxies

volumes:
  inventory_data:
    name: household-inventory-data        # Named volume for easy backup/migration
